#pragma checksum "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "0bd2e239a7f0b457598daeeba2aa7bf0c0c3b7e3"
// <auto-generated/>
#pragma warning disable 1591
namespace OrderSysManagement.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using OrderSysManagement;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using OrderSysManagement.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using AntDesign;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using OrderSysManagement.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using OrderSysManagement.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using OrderSysManagement.Service;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Git\BlazorPeojects\OrderSysManagement\_Imports.razor"
using OrderSysManagement.Methods;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
using System.Text;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/menuTemplate/{TransNum}")]
    public partial class MenuTemplate : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<style>\r\n    .buttonStyle {\r\n        display: inline-flex;\r\n        margin-left: 10px;\r\n        background-color: #FFC107;\r\n        font-size: 18px;\r\n    }\r\n\r\n    .columnStyle {\r\n        font-size: 18px;\r\n    }\r\n</style>\r\n\r\n");
            __builder.OpenElement(1, "div");
            __builder.OpenElement(2, "h3");
            __builder.AddAttribute(3, "style", "font-weight:bold;");
            __builder.AddMarkupContent(4, "\r\n        桌号 ");
            __builder.AddContent(5, 
#nullable restore
#line 23 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
            TransNum

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(6, "\r\n        ");
            __builder.OpenComponent<AntDesign.Button>(7);
            __builder.AddAttribute(8, "Class", "buttonStyle");
            __builder.AddAttribute(9, "Size", "large");
            __builder.AddAttribute(10, "Icon", "arrow-left");
            __builder.AddAttribute(11, "OnClick", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 24 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                             Return

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(12, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(13, "返回");
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(14, "\r\n");
            __builder.OpenElement(15, "div");
            __builder.AddAttribute(16, "Style", "float:left;width:60%;");
            __builder.OpenComponent<AntDesign.Card>(17);
            __builder.AddAttribute(18, "Style", "background-color:#ebe4b6;height:500px;");
            __builder.AddAttribute(19, "Bordered", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 28 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                   true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(20, "Body", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<AntDesign.Title>(21);
                __builder2.AddAttribute(22, "Style", "font-size:26px;text-align:center;vertical-align:central;padding:0px;");
                __builder2.AddAttribute(23, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(24, "销售列表");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(25, "\r\n            ");
                __builder2.OpenComponent<AntDesign.Table<ArticleModel>>(26);
                __builder2.AddAttribute(27, "DataSource", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.IEnumerable<ArticleModel>>(
#nullable restore
#line 31 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                     Transaction.ArticleModels

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(28, "Footer", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 31 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                                         Footer

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(29, "Class", "columnStyle");
                __builder2.AddAttribute(30, "PageSize", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 31 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                                                                                     _pageSize

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(31, "PageSizeChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Int32>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Int32>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _pageSize = __value, _pageSize))));
                __builder2.AddAttribute(32, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<ArticleModel>)((context) => (__builder3) => {
                    __Blazor.OrderSysManagement.Pages.MenuTemplate.TypeInference.CreateColumn_0(__builder3, 33, 34, "名称", 35, 
#nullable restore
#line 32 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                 context.Name

#line default
#line hidden
#nullable disable
                    , 36, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => context.Name = __value, context.Name)), 37, () => context.Name);
                    __builder3.AddMarkupContent(38, "\r\n                ");
                    __Blazor.OrderSysManagement.Pages.MenuTemplate.TypeInference.CreateColumn_1(__builder3, 39, 40, "数量", 41, 
#nullable restore
#line 33 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                 context.Number

#line default
#line hidden
#nullable disable
                    , 42, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => context.Number = __value, context.Number)), 43, () => context.Number);
                    __builder3.AddMarkupContent(44, "\r\n                ");
                    __Blazor.OrderSysManagement.Pages.MenuTemplate.TypeInference.CreateColumn_2(__builder3, 45, 46, "单价/折扣金额(百分比)", 47, 
#nullable restore
#line 34 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                           context.Price

#line default
#line hidden
#nullable disable
                    , 48, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => context.Price = __value, context.Price)), 49, () => context.Price);
                    __builder3.AddMarkupContent(50, "\r\n                ");
                    __Blazor.OrderSysManagement.Pages.MenuTemplate.TypeInference.CreateColumn_3(__builder3, 51, 52, "总价", 53, 
#nullable restore
#line 35 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                 context.TotalPrice

#line default
#line hidden
#nullable disable
                    , 54, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => context.TotalPrice = __value, context.TotalPrice)), 55, () => context.TotalPrice);
                    __builder3.AddMarkupContent(56, "\r\n                ");
                    __builder3.OpenComponent<AntDesign.ActionColumn>(57);
                    __builder3.AddAttribute(58, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.OpenComponent<AntDesign.Space>(59);
                        __builder4.AddAttribute(60, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder5) => {
                            __builder5.OpenComponent<AntDesign.SpaceItem>(61);
                            __builder5.AddAttribute(62, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder6) => {
                                __builder6.OpenComponent<AntDesign.Button>(63);
                                __builder6.AddAttribute(64, "Type", "primary");
                                __builder6.AddAttribute(65, "Icon", "plus");
                                __builder6.AddAttribute(66, "Style", "background-color:#6cbbd9");
                                __builder6.AddAttribute(67, "OnClick", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 38 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                                                                ()=>OrderFood(context.Code)

#line default
#line hidden
#nullable disable
                                )));
                                __builder6.CloseComponent();
                            }
                            ));
                            __builder5.CloseComponent();
                        }
                        ));
                        __builder4.CloseComponent();
                        __builder4.AddMarkupContent(68, "\r\n                    ");
                        __builder4.OpenComponent<AntDesign.Space>(69);
                        __builder4.AddAttribute(70, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder5) => {
                            __builder5.OpenComponent<AntDesign.SpaceItem>(71);
                            __builder5.AddAttribute(72, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder6) => {
                                __builder6.OpenComponent<AntDesign.Button>(73);
                                __builder6.AddAttribute(74, "Type", "primary");
                                __builder6.AddAttribute(75, "style", "background-color:#cd3e15");
                                __builder6.AddAttribute(76, "Icon", "minus");
                                __builder6.AddAttribute(77, "OnClick", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 41 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                                                                 ()=>Deduct(context.Code)

#line default
#line hidden
#nullable disable
                                )));
                                __builder6.CloseComponent();
                            }
                            ));
                            __builder5.CloseComponent();
                        }
                        ));
                        __builder4.CloseComponent();
                    }
                    ));
                    __builder3.CloseComponent();
                }
                ));
                __builder2.CloseComponent();
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(78, "\r\n\r\n    ");
            __builder.OpenComponent<AntDesign.Button>(79);
            __builder.AddAttribute(80, "Class", "buttonStyle");
            __builder.AddAttribute(81, "Size", "large");
            __builder.AddAttribute(82, "Icon", "printer");
            __builder.AddAttribute(83, "OnClick", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 49 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                      PrintBill

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(84, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(85, "打印小票");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(86, "\r\n    ");
            __builder.OpenComponent<AntDesign.Button>(87);
            __builder.AddAttribute(88, "Class", "buttonStyle");
            __builder.AddAttribute(89, "Size", "large");
            __builder.AddAttribute(90, "Icon", "money-collect");
            __builder.AddAttribute(91, "OnClick", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 50 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                            CheckOut

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(92, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(93, "结 账");
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(94, "\r\n");
            __builder.OpenElement(95, "div");
            __builder.OpenElement(96, "div");
            __Blazor.OrderSysManagement.Pages.MenuTemplate.TypeInference.CreateAntDesign_RadioGroup_4(__builder, 97, 98, "large", 99, "columnStyle", 100, "solid", 101, "padding-left:20px;", 102, 
#nullable restore
#line 54 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                            radioValue

#line default
#line hidden
#nullable disable
            , 103, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => radioValue = __value, radioValue)), 104, () => radioValue, 105, (__builder2) => {
#nullable restore
#line 55 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
             foreach (var category in Categories)
            {

#line default
#line hidden
#nullable disable
                __Blazor.OrderSysManagement.Pages.MenuTemplate.TypeInference.CreateRadio_5(__builder2, 106, 107, true, 108, 
#nullable restore
#line 57 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                           category.Description

#line default
#line hidden
#nullable disable
                , 109, (__builder3) => {
                    __builder3.AddContent(110, 
#nullable restore
#line 57 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                  category.Description

#line default
#line hidden
#nullable disable
                    );
                }
                );
#nullable restore
#line 58 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
            }

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(111, "\r\n    ");
            __builder.OpenComponent<AntDesign.CardGrid>(112);
            __builder.AddAttribute(113, "Style", "width:40%; padding-left:20px;padding-top:10px;");
            __builder.AddAttribute(114, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
#nullable restore
#line 62 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
         foreach (var food in ArticleButtonList)
        {
            

#line default
#line hidden
#nullable disable
#nullable restore
#line 64 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
             if (food.ArticleCategory.Description == radioValue)
            {

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(115, "button");
                __builder2.AddAttribute(116, "class", "btn btn-warning");
                __builder2.AddAttribute(117, "style", "width:100px;height:80px;margin:3px;font-size:18px;");
                __builder2.AddAttribute(118, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 66 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                                                                     (()=>OrderFood(food.Code))

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddContent(119, 
#nullable restore
#line 66 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
                                                                                                                                                  food.Description

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
#nullable restore
#line 67 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 67 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
             
        }

#line default
#line hidden
#nullable disable
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 76 "C:\Git\BlazorPeojects\OrderSysManagement\Pages\MenuTemplate.razor"
       
    [Parameter]
    public string TransNum { get; set; }
    private List<Article> ArticleButtonList = new List<Article>();
    private List<ArticleModel> FoodList = new List<ArticleModel>();
    private TransationModel Transaction { get; set; }
    private List<ArticleCategory> Categories = new List<ArticleCategory>();
    private decimal? TotalPriceOfTransation;
    private string Footer;
    int _pageSize = 5;
    //public ResultMsg resultMsg =new ResultMsg();
    protected override async Task OnInitializedAsync()
    {
        Transaction = TransactionService.transactionList.FirstOrDefault(t => t.TableNum == TransNum);
        if (Transaction == null)
        {
            Transaction = new TransationModel();
            Transaction.TableNum = TransNum;
            Transaction.ArticleModels = new List<ArticleModel>();
            TransactionService.transactionList.Add(Transaction);
        }
        ArticleButtonList = await ArticleService.GetArticlesAsync();
        FoodList = ArticleButtonList.Select(a => new ArticleModel
        {
            Code = a.Code,
            Name = a.Description,
            AmountMet = a.AmountMet,
            Price = a.Price,
            ArticleCategoryId = a.ArticleCategoryId.ToString(),
            ArticleCategoryName = a.ArticleCategory.Description
        }).ToList();
        Categories = await ArticleCategoryService.GetCategoriesAsync();
        GetTotalPriceOfTransation();
    }

    public string radioValue = "主食";

    public void OrderFood(int foodCode)
    {
        var food = Transaction.ArticleModels.FirstOrDefault(a => a.Code == foodCode);
        if (food == null)
        {
            food = FoodList.First(a => a.Code == foodCode);
            food.Number = 0;
            if (food.Price < 0 && GetTotalPriceOfTransation() < food.AmountMet)
            {
                CommonMethods.HandleWarning("金额不满足折扣条件：" + food.Name);
                return;
            }
            Transaction.ArticleModels.Add(food);
        }
        if (food.ArticleCategoryName == "百分比折扣")
        {
            food.Number = 1;
        }
        else
        {
            food.Number = food.Number + 1;
            food.TotalPrice = food.Number * food.Price;
        }
        GetTotalPriceOfTransation();
    }
    public void PrintBill()
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("     餐饮管理系统  \n");
        //40
        sb.Append("****************************************\n");
        string a = ("商品名").PadRight(20, ' ') + ("价格").PadRight(20, ' ') + "\n";
        sb.Append(a);
        foreach (var f in Transaction.ArticleModels)
        {
            string text = f.Name.PadRight(20, ' ') + f.Price.ToString().PadRight(20, ' ') + "\n";
            sb.Append(text);
        }
        sb.Append("*************************************\n");
        PrintJob.Print(sb.ToString());
    }
    private void CheckOut()
    {
        Transaction.TransNum = TransactionService.GetMaxTransNum() + 1;
        TransactionService.InsertTransaction(Transaction);
        TransactionService.transactionList.Remove(Transaction);
        Transaction = new TransationModel();
        Transaction.ArticleModels = new List<ArticleModel>();
        Transaction.TableNum = TransNum;
        TransactionService.transactionList.Add(Transaction);
        GetTotalPriceOfTransation();
    }
    private void Return()
    {
        NavigationManager.NavigateTo("/tables");
    }
    private void Deduct(int? code)
    {
        var food = Transaction.ArticleModels.First(f => f.Code == code);
        food.Number = food.Number - 1;
        food.TotalPrice = food.Number * food.Price;
        var discounts = Transaction.ArticleModels.Where(a => a.ArticleCategoryName.Contains("折扣"));
        foreach (var d in discounts)
        {
            if (d.AmountMet > GetTotalPriceOfTransation())
            {
                CommonMethods.HandleWarning("金额不满足折扣条件：" + d.Name + "请先取消折扣！");
                food.Number = food.Number + 1;
                food.TotalPrice = food.Number * food.Price;
            }
        }
        if (food.Number == 0)
        {
            Transaction.ArticleModels.Remove(food);
        }
        GetTotalPriceOfTransation();
    }
    //private void Add(int? code)
    //{
    //    var food = Transaction.ArticleModels.First(f => f.Code == code);
    //    food.Number = food.Number + 1;
    //    food.TotalPrice = food.Number * food.Price;
    //    GetTotalPriceOfTransation();
    //}
    private decimal? GetTotalPriceOfTransation()
    {
        if (Transaction.ArticleModels.Any())
        {
            TotalPriceOfTransation = Transaction.ArticleModels.Where(f => f.ArticleCategoryName != "百分比折扣").Sum(f => f.TotalPrice);
            var percentDiscountArticle = Transaction.ArticleModels.FirstOrDefault(f => f.ArticleCategoryName == "百分比折扣");
            if (percentDiscountArticle != null)
            {
                percentDiscountArticle.TotalPrice =Math.Round(Convert.ToDecimal(TotalPriceOfTransation * percentDiscountArticle.Price),3);
                TotalPriceOfTransation += percentDiscountArticle.TotalPrice;
            }
            Footer = "总金额：" + Convert.ToString(TotalPriceOfTransation);
            return TotalPriceOfTransation;
        }
        else
        {
            Footer = null;
            return 0;
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private CommonMethods CommonMethods { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private PrintJobService PrintJob { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ArticleCategoryService ArticleCategoryService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private TransactionService TransactionService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ArticleService ArticleService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
namespace __Blazor.OrderSysManagement.Pages.MenuTemplate
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateColumn_0<TData>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, TData __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TData> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TData>> __arg3)
        {
        __builder.OpenComponent<global::AntDesign.Column<TData>>(seq);
        __builder.AddAttribute(__seq0, "Title", __arg0);
        __builder.AddAttribute(__seq1, "Field", __arg1);
        __builder.AddAttribute(__seq2, "FieldChanged", __arg2);
        __builder.AddAttribute(__seq3, "FieldExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateColumn_1<TData>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, TData __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TData> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TData>> __arg3)
        {
        __builder.OpenComponent<global::AntDesign.Column<TData>>(seq);
        __builder.AddAttribute(__seq0, "Title", __arg0);
        __builder.AddAttribute(__seq1, "Field", __arg1);
        __builder.AddAttribute(__seq2, "FieldChanged", __arg2);
        __builder.AddAttribute(__seq3, "FieldExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateColumn_2<TData>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, TData __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TData> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TData>> __arg3)
        {
        __builder.OpenComponent<global::AntDesign.Column<TData>>(seq);
        __builder.AddAttribute(__seq0, "Title", __arg0);
        __builder.AddAttribute(__seq1, "Field", __arg1);
        __builder.AddAttribute(__seq2, "FieldChanged", __arg2);
        __builder.AddAttribute(__seq3, "FieldExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateColumn_3<TData>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, TData __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TData> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TData>> __arg3)
        {
        __builder.OpenComponent<global::AntDesign.Column<TData>>(seq);
        __builder.AddAttribute(__seq0, "Title", __arg0);
        __builder.AddAttribute(__seq1, "Field", __arg1);
        __builder.AddAttribute(__seq2, "FieldChanged", __arg2);
        __builder.AddAttribute(__seq3, "FieldExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateAntDesign_RadioGroup_4<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, global::System.String __arg1, int __seq2, global::System.String __arg2, int __seq3, global::System.String __arg3, int __seq4, TValue __arg4, int __seq5, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg5, int __seq6, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg6, int __seq7, global::Microsoft.AspNetCore.Components.RenderFragment __arg7)
        {
        __builder.OpenComponent<global::AntDesign.RadioGroup<TValue>>(seq);
        __builder.AddAttribute(__seq0, "Size", __arg0);
        __builder.AddAttribute(__seq1, "Class", __arg1);
        __builder.AddAttribute(__seq2, "ButtonStyle", __arg2);
        __builder.AddAttribute(__seq3, "Style", __arg3);
        __builder.AddAttribute(__seq4, "Value", __arg4);
        __builder.AddAttribute(__seq5, "ValueChanged", __arg5);
        __builder.AddAttribute(__seq6, "ValueExpression", __arg6);
        __builder.AddAttribute(__seq7, "ChildContent", __arg7);
        __builder.CloseComponent();
        }
        public static void CreateRadio_5<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Boolean __arg0, int __seq1, TValue __arg1, int __seq2, global::Microsoft.AspNetCore.Components.RenderFragment __arg2)
        {
        __builder.OpenComponent<global::AntDesign.Radio<TValue>>(seq);
        __builder.AddAttribute(__seq0, "RadioButton", __arg0);
        __builder.AddAttribute(__seq1, "Value", __arg1);
        __builder.AddAttribute(__seq2, "ChildContent", __arg2);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
